\documentclass[hyperref,german,beleg,final]{cgvpub}
%weitere Optionen zum Ergänzen (in eckigen Klammern):
% 
% female	weibliche Titelbezeichnung bei Diplom
% bibnum	numerische Literaturschlüssel
% final 	für Abgabe	
% lof			Abbildungsverzeichis
% lot			Tabellenverzeichnis
% noproblem	keine Aufgabenstellung
% notoc			kein Inhaltsverzeichnis
% twoside		zweiseitig
\author{Josef Schulz}
\title{Ground-Truth-Renderer für Partikelbasierte Daten}
\birthday{20. Oktober 1989}
\placeofbirth{Dresden}
\matno{3658867}

\betreuer{Dipl-MedienInf. Joachim Staib}
\bibfiles{literatur}
\problem{
Die Darstellung von Partikeldaten mittels Kugelglyphen ist in der wissenschaftlichen Visualisierung
inzwischen etabliert. Gerade bei dichten Datensätzen stellen kompakte Anordnungen von sehr vielen
Kugeln jedoch ein Problem für die Erkennbarkeit der zu visualisierenden Vorgänge dar. Eine Möglichkeit, diesem Problem zu begegnen ist es, über Blinn-Phong-Beleuchtung hinausgehende Effekte wie
globale Schatten oder den Einsatz von Methoden aus dem Volume-Rendering zu integrieren. Durch
deren Komplexität muss in Echtzeitvisualisierungen jedoch auf teilweise grobe Approximationen zu-
rückgegriffen werden. Die Einschätzung der Approximationsqualität fällt häufig schwer, da keine Visualisierung des exakten Verfahrens verfügbar ist.
Ziel dieser Belegarbeit ist die Umsetzung eines CPU-Renderers für Partikeldaten, der eine Reihe
von erweiterten Visualisierungseffekten unterstützt. Er soll die Grundlage für Ground-Truth-
Visualisierungen bieten.
Zunächst soll eine geeignete Softwarearchitektur konzipiert und umgesetzt werden. Die Partikel sollen als mit lichtemittierendem und ?absorbierendem Gas gefüllte Kugeln interpretiert werden. Es sollen anschließend Methoden entwickelt werden, um einen physikalisch plausiblen globalen Schattenwurf und Lichttransport für eine beliebige Anzahl an Punkt- und Richtungslichtquellen zu ermöglichen.
Die dafür notwendigen Gleichungen für Kugeln mit konstanter Dichte und Emission, sowie linearer
Absorption, sollen soweit wie möglich analytisch bestimmt und, sobald nicht mehr möglich, mittels
möglichst exakter numerischer Integratoren ausgewertet werden.

Die Teilaufgaben umfassen:

\begin{itemize}
\item Umfassende Literaturrecherche zur globalen Beleuchtungsrechnung in der Volumen Visualisierung
\item Schrittweise Konzeption und Umsetzung einer erweiterbaren Architektur zum Erzeugen von Ground-Truth-Bildern:

	\begin{enumerate}
		\item Zunächst als Raytracer für opake Kugeln, der globale Schatteneffekte von frei
		positionierbaren Punkt- und Richtungslichtquellen unterstützt
		\item Umsetzung eines Renderers, der Kugeln als Volumen nach dem Emissions-Absorptions-Modell rendert, dabei analytische Bestimmung des Volume-Rendering-Integrals, einschließlich Integration direkter Beleuchtung unverdeckter Lichtquellen
		\item Erweiterung zu verdeckten Lichtquellen und Bestimmung der Lichtstärke- und Farbe
		für Lichtstrahlen durch verdeckende Kugeln
	\end{enumerate}
\item Unterstützung für ein Standardformat wie VRML
\item Evaluation in Bezug auf Korrektheit, Bildartefakte und (numerische) Grenzfälle
\end{itemize}
\newpage
Optional:
\begin{itemize}
\item Unterstützung für Refraktionseffekte
\item Unterstützung komplexerer Materialtypen
\end{itemize}
}
\copyrighterklaerung{Hier soll jeder Autor die von ihm eingeholten
Zustimmungen der Copyright-Besitzer angeben bzw. die in Web Press
Rooms angegebenen generellen Konditionen seiner Text- und
Bild"ubernahmen zitieren.}
\acknowledgments{Die Danksagung...}

\begin{document}

\chapter{Einleitung}
 
\section{Vorvorwort}

	Ein Photon das im inneren der Sonne emittiert wird, ist dem kurzwelligen Spektrum der elektromagnetischen Wellen zugeordnet. Es handelt sich um Gammastrahlung. 
	Auf seiner langen Reise vom Kern bis zur Korona, 
	die rund 150.000 Jahre dauert, wird das Photon durch das enorm dichte und
	heiße Gas der Sonne blau verschoben.
	Auf den rund 690.000 km, die das Photon durch die Sonne wandert, absorbiert die Sonne
	einen großen Teil der Energie des Photons. Nachdem es die Sonne verlassen hat, benötigt
	das Photon weitere 8 Minuten um unsere Erde zu erreichen. 
	Die Geschichte von der Langen Reise dieses einzelnen Photons ist ein extremes Beispiel
	für den Vorgang der im Folgenden betrachtet wird.
	
	Licht ist im Physikalischen Sinn ein noch nicht gänzlich erfasstes Phänomen.
	Es zeigen sich Charakteristika von Wellen und von Teilchen, es wird vom
	Welle-Teilechodualismus gesprochen. Dieses wunderbare Modell ist ein Deckmantel
	für viele Fragen, die sich im Zusammenhang mit der Ausbreitung des Lichtes in unserer
	Welt ergeben und noch nicht alle beantwortet sind.
	
	Die Optik ist in der Physik die Lehre des Lichtes, sie beschreibt die Ausbreitung des Lichts
	und die Wechselwirkung mit Materie. In der Optik gibt es verschiedene Modelle, welche die
	Eigenschaften des Lichtes beschreiben.
	
	Die Strahlenoptik betrachtet das Licht in Form von Strahlen. Diese Modell approximiert 
	das Licht als Strahl, der von der Lichtquelle aus in die Welt geschossen wird.
	Diese Vereinfachung kann genutzt werde, wenn die Größenordnungen der Objekte, welche im
	Zusammenhang mit Licht betrachtet werden, deutlich über der Wellenlänge des Lichts liegt.
	Ist dies erfüllt können Typische Welleneigenschaften, wie Beugung und daraus resultierende
	Interferenz vernachlässigt werden.
	Für die Berechnung von Schatten, Reflexion und Brechung eignet sich die Strahlenoptik
	ausgesprochen gut und soll für diese Arbeit Grundlage der Betrachtung sein.
	Die Lichtstrahlen breiten sich immer nur geradlinig aus, bis sie auf einen Körper treffen und
	reflektiert, gestreut oder gebrochen werden. Sie können einander durchdringen ohne sich gegenseitig zu beeinflussen. Der Weg des Lichtes lässt sich umkehren, was zur folge hat,
	dass die Gesetzt auch bei umgekehrter Lichtrichtung gelten.
	Dieses Prinzip ist essentiell für die Implementierung welche im Folgenden betrachtet wird,
	da die Strahlen von der Kamera aus in die Welt geschossen werden.
	
	Die Beleuchtung einer Computergenerierten Szene wird in vielen Implementierungen, die
	aus Computerspielen und anderen Visualisierungen bekannt sind stark vereinfacht.
	Diese Modelle lassen die Landschaften in einem schönen Licht erscheinen, vernachlässigen
	jedoch Physikalische Gesetzmäßigkeiten, wie die Erhaltung von Energie.
	Die Berechnung von Schatten welche sich durch den Weg des Lichtes ergeben sollten,
	werden oftmals nur sehr vereinfacht berechnet, insofern sie vorhanden sind.
	
	Für die meisten Anwendungen sind diese Approximationen vollkommen ausreichend.
	In der Computergrafik hat sich die Repräsentation von Daten mithilfe von Kugelglyphen
	bewährt. Als Beispiel soll das Modell eines Moleküls dienen.
	Ein Problem welches sich aus der Projektion auf den Bildschirm ergibt, ist die 
	Tiefenwahrnehmung des Menschen. Die durch den Computergenerierten Bilder sind in der Regel
	zweidimensionale Projektionen von dreidimensionalen Szenen. Der Mensch benötigt zur Erkennung
	von Lagenbeziehungen der Objekte in der Szene weitere Informationen.
	Im Laufe des Lebens lernt ein Mensch, die Merkmale des Lichtes zu Interpretieren.
	Auf diese Weise gelingt es einem Betrachter, die Lage der Lichtquelle nur aus einer Objekt
	Silhouette zu schätzen.
	Um diese Fähigkeit nutzen zu können wird jedoch eine komplexe Beleuchtung der Szene nötig.
	

\chapter{Grundlagen}

	In diesem Kapitel soll die verwendete Rendertechnik Begrifflich genauer abgegrenzt werden.
	Im Folgenden werden alle benötigten Mathematischen Formeln hergeleitet und erklärt.
	Am ende dieses Kapitels wird der Aufbau der Perspektivischen Kamera, 
	welche hier zum Einsatz kommt genau erläutert.
	
%\section{Lokale und Globale Beleuchtung}
	
\section{Rendertechniken}

\subsection{Raytracing}

	Raytracing ist ein verfahren, bei dem Ausgehend von der Lichtquelle, oder der Bildebene Strahlen in
	die Szene geschickt werden. 
	Strahlen, die auf ein ein Objekt treffen werden reflektiert, gestreut oder gebrochen. 
	Die Möglichkeiten hängen vom Verwendeten Modell der Oberfläche und des Lichtes ab.
	Nach der Wechselwirkung mit der Oberfläche können weitere Strahlen durch die Szene verfolgt werden.
	Dieser Vorgang wir meist Rekursiv aufgebaut und nach dem erreichen einer entsprechenden Rekursionstiefe
	wird dieser abgebrochen.
	Das Bild selbst entsteht durch die Aufakkumulierung der Lichtintensitäten, welche die Bildebene erreichen.
	Modell dieser Technik ist die Strahlenoptik, welche das Licht auf Strahlen reduziert die durch die Szene
	geschossen werden. Beugungsphänomene werden bei dieser Technik vernachlässigt.
 
\subsection{Path und Lighttracer}

\subsubsection{Lighttracer}

	Der Lighttracer ist eine Spezialisierung des Raytracers, bei dem die Wege des Lichtes grundlegend,
	ausgehend von der Lichtquelle berechnet werden. Hierbei werden die Strahlen bis zum erreichen eines
	Abbruchkriteriums durch die Szene verfolgt und anschließend mit der Bildebene verbunden.
	
\subsubsection{Pathtracer}

	Auch der Pathtracer stellt eine Spezialisierung des Raytracers da, bei dem die Lichtwege zum einem
	ausgehend von der Bildebene und gleichzeitig ausgehend von der Lichtquelle betrachtet werden.
	Nach erreichen des Abbruchkriteriums werden die Lichtwege ausgehend von der Lichtquelle und der
	Bildebene mit einander Kombiniert. Durch dieses Vorgehen ergeben sich wesentlich schnell mehr mögliche
	Lichtwege, als beim normalen Rayztracingalgorithmus.
	Der Pathtracer ist ein State-Of-the-Art Algorithmus zur Berrechnung der Globalen Beleuchtung.
	
\subsection{Raycasting}

	Raycasting stellt eine Vereinfachte Form des Raytracing da, bei dieser Technik wird die Berrechnung der
	Beleuchtung bereits nach der ersten Kollision zwischen Strahl und Objekt abgebrochen.
	Raycasting ist die Grundlage des in dieser Arbeit verwendeten Renderalgorithmus.

\section{Strahl}
	Der Strahl ist das Zentrale Element dieser Rendertechnik.
	
	\begin{figure}[htbp]
		\centering
			$\vec{r} = \underline{p} + t \cdot \vec{r}$	
		\caption{Formel des Strahls}
		\label{fig:ray}
	\end{figure}
	
	
	Jeder Punkt auf dem Strahl lässt sich durch die 

\section{Kugel}

\section{Schnittpunktberechnung}

\section{Volumen-Integral}

\section{Lokale Bleuchtung}
\section{Globale Beleuchtung}

\section{Material und Konstanten}

\chapter{Das Programm}

\section{Verdeckung}

Die endgültige Lichtintensität, die das Auge erreicht setzt sich zusammen aus:
 
$I = I_E + I_B + I_L$

dem emittierten Licht:

$I_E = \int\limits_{t_n}^{t_f} \tau(t_n, t) \cdot c(v_r(t)) dt $

dem ambienten Licht:

$I_B = \tau(t_n, t_f) \cdot I_b$

$\tau(t_0, t_1) = e^{- \int\limits_{t_0}^{t_1} \sigma (v_r(t)) dt}$

und dem Licht der Einzelnen Lichtquellen. Hier reduziert auf einen einzelnen Strahl der den Sichtstrahl $\underline{r}(t) = \underline{e} + t \cdot \vec{v}$ im Volumen schneidet. (An der Stelle t)

$I_L(t) = \tau(t_n, t) \cdot I_p(t)$

$I_p(t) = e^{- \int\limits_{0}^{l(t)} \cdot  \sigma (v_r(s)) ds} \cdot I_p$

$I_p(t) = e^{- \int\limits_{0}^{l(t)} \cdot  \lambda \cdot v_r(s) ds} \cdot I_p$

$I_p(t) = e^{- \int\limits_{0}^{l(t)} \cdot  \lambda \cdot \kappa ds} \cdot I_p$

$I_p(t) = e^{- \int\limits_{0}^{l(t)} \cdot  \lambda \cdot \kappa ds} \cdot I_p$

$I_p(t) = e^{- \lambda \cdot \kappa \cdot \int\limits_{0}^{l(t)} ds} \cdot I_p$

$I_p(t) = e^{- \lambda \cdot \kappa \cdot s} \cdot I_p$

$I_p(t) = e^{- \lambda \cdot \kappa \cdot \frac{-<p(t), d(t)>}{<d(t), d(t)>} + \frac{\sqrt{<p(t), d(t)>^2 - <p(t), p(t)> \cdot <d(t), d(t)>}}{<d(t), d(t)>}} \cdot I_p$

mit $d(t) = d$ da es sich um eine Richtungslichtquelle handelt

$I_p(t) = e^{- \lambda \cdot \kappa \cdot \frac{-<p(t), d>}{<d, d>} + \frac{\sqrt{<p(t), d>^2 - <p(t), p(t)> \cdot <d, d>}}{<d, d>}} \cdot I_p$

$I_{L(t)} = \tau(t_n, t) \cdot e^{- \lambda \cdot \kappa \cdot \frac{-<p(t), d>}{<d, d>} + \frac{\sqrt{<p(t), d>^2 - <p(t), p(t)> \cdot <d, d>}}{<d, d>}} \cdot I_p$

Daraus ergibt sich $I_L$ für eine Richtungslichtquelle

$I_L = \int\limits_{t_n}^{t_f} I_{L(t)} dt $

$I_L = \int\limits_{t_n}^{t_f} \tau(t_n, t) \cdot I_{p(t)} dt$

$I_L = \int\limits_{t_n}^{t_f} \tau(t_n, t) \cdot e^{- \lambda \cdot \kappa \cdot \frac{-<p(t), d>}{<d, d>} + \frac{\sqrt{<p(t), d>^2 - <p(t), p(t)> \cdot <d, d>}}{<d, d>}} \cdot I_p dt$

\section{Verwendete Technologien}
\section{UML-Klassen}


\chapter{Evaluation}

\subsection{Analytisches Ende}
\subsection{Numerische Grenzfälle}

\chapter{Fazit}

%\chapter{title}
%
%\chapter{ein kapitel}
%\section{eine Grafik}
%\begin{figure}[htbp]
%	\centering
%		\includegraphics{test.png}
%	\caption{beschriftung}
%	\label{fig:diplominf}
%\end{figure}


%\subsection{Etwas Mathe}
%
%\[
%\sum_{i=1}^{100}x_i
%\]
%noch mehr text
%\subsubsection{Verweise auf Literatur}
%So kann ich Literatur aus literatur.bib zitieren: \cite{kochbuch}. 
%
%\paragraph{etwas quelltext}
%
%
%\begin{figure}[htbp]
%\begin{lstlisting}[frame=trbl]
%//comment
%for(int i = 0; i < 100;i++)
%{
%test(i);
%}
%\end{lstlisting}
%\end{figure}
%
%text
%
%\cite*{}

\end{document}